function cov_2kby2dsbm1(){var path="C:\\Users\\ha0se\\Documents\\Temasek Polytechnic\\Semester 2\\DevOps Essentials\\test3\\blog-app\\backend\\verifyToken.js";var hash="226d5d418195e46b8ad84e0097a6ea849338c752";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\ha0se\\Documents\\Temasek Polytechnic\\Semester 2\\DevOps Essentials\\test3\\blog-app\\backend\\verifyToken.js",statementMap:{"0":{start:{line:1,column:12},end:{line:1,column:35}},"1":{start:{line:3,column:20},end:{line:20,column:1}},"2":{start:{line:4,column:16},end:{line:4,column:33}},"3":{start:{line:6,column:2},end:{line:8,column:3}},"4":{start:{line:7,column:4},end:{line:7,column:62}},"5":{start:{line:9,column:2},end:{line:19,column:5}},"6":{start:{line:10,column:4},end:{line:12,column:5}},"7":{start:{line:11,column:6},end:{line:11,column:57}},"8":{start:{line:14,column:4},end:{line:14,column:26}},"9":{start:{line:18,column:4},end:{line:18,column:11}},"10":{start:{line:22,column:0},end:{line:22,column:29}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:3,column:20},end:{line:3,column:21}},loc:{start:{line:3,column:40},end:{line:20,column:1}},line:3},"1":{name:"(anonymous_1)",decl:{start:{line:9,column:40},end:{line:9,column:41}},loc:{start:{line:9,column:61},end:{line:19,column:3}},line:9}},branchMap:{"0":{loc:{start:{line:6,column:2},end:{line:8,column:3}},type:"if",locations:[{start:{line:6,column:2},end:{line:8,column:3}},{start:{line:6,column:2},end:{line:8,column:3}}],line:6},"1":{loc:{start:{line:10,column:4},end:{line:12,column:5}},type:"if",locations:[{start:{line:10,column:4},end:{line:12,column:5}},{start:{line:10,column:4},end:{line:12,column:5}}],line:10}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0},f:{"0":0,"1":0},b:{"0":[0,0],"1":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"226d5d418195e46b8ad84e0097a6ea849338c752"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_2kby2dsbm1=function(){return actualCoverage;};}return actualCoverage;}cov_2kby2dsbm1();const jwt=(cov_2kby2dsbm1().s[0]++,require("jsonwebtoken"));cov_2kby2dsbm1().s[1]++;const verifyToken=(req,res,next)=>{cov_2kby2dsbm1().f[0]++;const token=(cov_2kby2dsbm1().s[2]++,req.cookies.token);// console.log(token)
cov_2kby2dsbm1().s[3]++;if(!token){cov_2kby2dsbm1().b[0][0]++;cov_2kby2dsbm1().s[4]++;return res.status(401).json("You are not authenticated!");}else{cov_2kby2dsbm1().b[0][1]++;}cov_2kby2dsbm1().s[5]++;jwt.verify(token,process.env.SECRET,async(err,data)=>{cov_2kby2dsbm1().f[1]++;cov_2kby2dsbm1().s[6]++;if(err){cov_2kby2dsbm1().b[1][0]++;cov_2kby2dsbm1().s[7]++;return res.status(403).json("Token is not valid!");}else{cov_2kby2dsbm1().b[1][1]++;}cov_2kby2dsbm1().s[8]++;req.userId=data._id;// console.log("passed")
cov_2kby2dsbm1().s[9]++;next();});};cov_2kby2dsbm1().s[10]++;module.exports=verifyToken;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMmtieTJkc2JtMSIsImFjdHVhbENvdmVyYWdlIiwiand0IiwicyIsInJlcXVpcmUiLCJ2ZXJpZnlUb2tlbiIsInJlcSIsInJlcyIsIm5leHQiLCJmIiwidG9rZW4iLCJjb29raWVzIiwiYiIsInN0YXR1cyIsImpzb24iLCJ2ZXJpZnkiLCJwcm9jZXNzIiwiZW52IiwiU0VDUkVUIiwiZXJyIiwiZGF0YSIsInVzZXJJZCIsIl9pZCIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlcyI6WyJ2ZXJpZnlUb2tlbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBqd3QgPSByZXF1aXJlKFwianNvbndlYnRva2VuXCIpO1xyXG5cclxuY29uc3QgdmVyaWZ5VG9rZW4gPSAocmVxLCByZXMsIG5leHQpID0+IHtcclxuICBjb25zdCB0b2tlbiA9IHJlcS5jb29raWVzLnRva2VuO1xyXG4gIC8vIGNvbnNvbGUubG9nKHRva2VuKVxyXG4gIGlmICghdG9rZW4pIHtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbihcIllvdSBhcmUgbm90IGF1dGhlbnRpY2F0ZWQhXCIpO1xyXG4gIH1cclxuICBqd3QudmVyaWZ5KHRva2VuLCBwcm9jZXNzLmVudi5TRUNSRVQsIGFzeW5jIChlcnIsIGRhdGEpID0+IHtcclxuICAgIGlmIChlcnIpIHtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKFwiVG9rZW4gaXMgbm90IHZhbGlkIVwiKTtcclxuICAgIH1cclxuXHJcbiAgICByZXEudXNlcklkID0gZGF0YS5faWQ7XHJcblxyXG4gICAgLy8gY29uc29sZS5sb2coXCJwYXNzZWRcIilcclxuXHJcbiAgICBuZXh0KCk7XHJcbiAgfSk7XHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHZlcmlmeVRva2VuO1xyXG4iXSwibWFwcGluZ3MiOiJxaUVBZVk7QUFBQUEsY0FBQSxTQUFBQSxDQUFBLFNBQUFDLGNBQUEsV0FBQUEsY0FBQSxFQUFBRCxjQUFBLEdBZlosS0FBTSxDQUFBRSxHQUFHLEVBQUFGLGNBQUEsR0FBQUcsQ0FBQSxNQUFHQyxPQUFPLENBQUMsY0FBYyxDQUFDLEVBQUNKLGNBQUEsR0FBQUcsQ0FBQSxNQUVwQyxLQUFNLENBQUFFLFdBQVcsQ0FBR0EsQ0FBQ0MsR0FBRyxDQUFFQyxHQUFHLENBQUVDLElBQUksR0FBSyxDQUFBUixjQUFBLEdBQUFTLENBQUEsTUFDdEMsS0FBTSxDQUFBQyxLQUFLLEVBQUFWLGNBQUEsR0FBQUcsQ0FBQSxNQUFHRyxHQUFHLENBQUNLLE9BQU8sQ0FBQ0QsS0FBSyxFQUMvQjtBQUFBVixjQUFBLEdBQUFHLENBQUEsTUFDQSxHQUFJLENBQUNPLEtBQUssQ0FBRSxDQUFBVixjQUFBLEdBQUFZLENBQUEsU0FBQVosY0FBQSxHQUFBRyxDQUFBLE1BQ1YsTUFBTyxDQUFBSSxHQUFHLENBQUNNLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDLDRCQUE0QixDQUFDLENBQzNELENBQUMsS0FBQWQsY0FBQSxHQUFBWSxDQUFBLFVBQUFaLGNBQUEsR0FBQUcsQ0FBQSxNQUNERCxHQUFHLENBQUNhLE1BQU0sQ0FBQ0wsS0FBSyxDQUFFTSxPQUFPLENBQUNDLEdBQUcsQ0FBQ0MsTUFBTSxDQUFFLE1BQU9DLEdBQUcsQ0FBRUMsSUFBSSxHQUFLLENBQUFwQixjQUFBLEdBQUFTLENBQUEsTUFBQVQsY0FBQSxHQUFBRyxDQUFBLE1BQ3pELEdBQUlnQixHQUFHLENBQUUsQ0FBQW5CLGNBQUEsR0FBQVksQ0FBQSxTQUFBWixjQUFBLEdBQUFHLENBQUEsTUFDUCxNQUFPLENBQUFJLEdBQUcsQ0FBQ00sTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUMscUJBQXFCLENBQUMsQ0FDcEQsQ0FBQyxLQUFBZCxjQUFBLEdBQUFZLENBQUEsVUFBQVosY0FBQSxHQUFBRyxDQUFBLE1BRURHLEdBQUcsQ0FBQ2UsTUFBTSxDQUFHRCxJQUFJLENBQUNFLEdBQUcsQ0FFckI7QUFBQXRCLGNBQUEsR0FBQUcsQ0FBQSxNQUVBSyxJQUFJLENBQUMsQ0FBQyxDQUNSLENBQUMsQ0FBQyxDQUNKLENBQUMsQ0FBQ1IsY0FBQSxHQUFBRyxDQUFBLE9BRUZvQixNQUFNLENBQUNDLE9BQU8sQ0FBR25CLFdBQVcifQ==