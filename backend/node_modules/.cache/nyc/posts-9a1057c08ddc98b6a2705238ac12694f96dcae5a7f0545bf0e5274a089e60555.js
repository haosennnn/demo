function cov_1a8v367nsd(){var path="C:\\Users\\ha0se\\Documents\\Temasek Polytechnic\\Semester 2\\DevOps Essentials\\test3\\blog-app\\backend\\routes\\posts.js";var hash="c0109b88fa4e0b51818fb1607fff54fbf00502d6";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\ha0se\\Documents\\Temasek Polytechnic\\Semester 2\\DevOps Essentials\\test3\\blog-app\\backend\\routes\\posts.js",statementMap:{"0":{start:{line:1,column:16},end:{line:1,column:34}},"1":{start:{line:2,column:15},end:{line:2,column:31}},"2":{start:{line:3,column:13},end:{line:3,column:38}},"3":{start:{line:4,column:15},end:{line:4,column:34}},"4":{start:{line:5,column:13},end:{line:5,column:38}},"5":{start:{line:6,column:16},end:{line:6,column:44}},"6":{start:{line:7,column:20},end:{line:7,column:45}},"7":{start:{line:10,column:0},end:{line:20,column:3}},"8":{start:{line:11,column:2},end:{line:19,column:3}},"9":{start:{line:12,column:20},end:{line:12,column:38}},"10":{start:{line:14,column:22},end:{line:14,column:42}},"11":{start:{line:16,column:4},end:{line:16,column:36}},"12":{start:{line:18,column:4},end:{line:18,column:30}},"13":{start:{line:23,column:0},end:{line:34,column:3}},"14":{start:{line:24,column:2},end:{line:33,column:3}},"15":{start:{line:25,column:24},end:{line:29,column:5}},"16":{start:{line:30,column:4},end:{line:30,column:38}},"17":{start:{line:32,column:4},end:{line:32,column:30}},"18":{start:{line:37,column:0},end:{line:45,column:3}},"19":{start:{line:38,column:2},end:{line:44,column:3}},"20":{start:{line:39,column:4},end:{line:39,column:48}},"21":{start:{line:40,column:4},end:{line:40,column:56}},"22":{start:{line:41,column:4},end:{line:41,column:51}},"23":{start:{line:43,column:4},end:{line:43,column:30}},"24":{start:{line:72,column:0},end:{line:72,column:24}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:10,column:36},end:{line:10,column:37}},loc:{start:{line:10,column:56},end:{line:20,column:1}},line:10},"1":{name:"(anonymous_1)",decl:{start:{line:23,column:32},end:{line:23,column:33}},loc:{start:{line:23,column:52},end:{line:34,column:1}},line:23},"2":{name:"(anonymous_2)",decl:{start:{line:37,column:35},end:{line:37,column:36}},loc:{start:{line:37,column:55},end:{line:45,column:1}},line:37}},branchMap:{},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0},f:{"0":0,"1":0,"2":0},b:{},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"c0109b88fa4e0b51818fb1607fff54fbf00502d6"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_1a8v367nsd=function(){return actualCoverage;};}return actualCoverage;}cov_1a8v367nsd();const express=(cov_1a8v367nsd().s[0]++,require("express"));const router=(cov_1a8v367nsd().s[1]++,express.Router());const User=(cov_1a8v367nsd().s[2]++,require("../models/User"));const bcrypt=(cov_1a8v367nsd().s[3]++,require("bcryptjs"));const Post=(cov_1a8v367nsd().s[4]++,require("../models/Post"));const Comment=(cov_1a8v367nsd().s[5]++,require("../models/Comment"));const verifyToken=(cov_1a8v367nsd().s[6]++,require("../verifyToken"));//CREATE
cov_1a8v367nsd().s[7]++;router.post("/create",verifyToken,async(req,res)=>{cov_1a8v367nsd().f[0]++;cov_1a8v367nsd().s[8]++;try{const newPost=(cov_1a8v367nsd().s[9]++,new Post(req.body));// console.log(req.body)
const savedPost=(cov_1a8v367nsd().s[10]++,await newPost.save());cov_1a8v367nsd().s[11]++;res.status(200).json(savedPost);}catch(err){cov_1a8v367nsd().s[12]++;res.status(500).json(err);}});//UPDATE
cov_1a8v367nsd().s[13]++;router.put("/:id",verifyToken,async(req,res)=>{cov_1a8v367nsd().f[1]++;cov_1a8v367nsd().s[14]++;try{const updatedPost=(cov_1a8v367nsd().s[15]++,await Post.findByIdAndUpdate(req.params.id,{$set:req.body},{new:true}));cov_1a8v367nsd().s[16]++;res.status(200).json(updatedPost);}catch(err){cov_1a8v367nsd().s[17]++;res.status(500).json(err);}});//DELETE
cov_1a8v367nsd().s[18]++;router.delete("/:id",verifyToken,async(req,res)=>{cov_1a8v367nsd().f[2]++;cov_1a8v367nsd().s[19]++;try{cov_1a8v367nsd().s[20]++;await Post.findByIdAndDelete(req.params.id);cov_1a8v367nsd().s[21]++;await Comment.deleteMany({postId:req.params.id});cov_1a8v367nsd().s[22]++;res.status(200).json("Post has been deleted!");}catch(err){cov_1a8v367nsd().s[23]++;res.status(500).json(err);}});// //GET POST DETAILS
// router.get("/:id", async (req, res) => {
//   try {
//     const post = await Post.findById(req.params.id);
//     res.status(200).json(post);
//   } catch (err) {
//     res.status(500).json(err);
//   }
// });
// //GET POSTS
// router.get("/", async (req, res) => {
//   const query = req.query;
//   try {
//     const searchFilter = {
//       title: { $regex: query.search, $options: "i" },
//     };
//     const posts = await Post.find(query.search ? searchFilter : null);
//     res.status(200).json(posts);
//   } catch (err) {
//     res.status(500).json(err);
//   }
// });
cov_1a8v367nsd().s[24]++;module.exports=router;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMWE4djM2N25zZCIsImFjdHVhbENvdmVyYWdlIiwiZXhwcmVzcyIsInMiLCJyZXF1aXJlIiwicm91dGVyIiwiUm91dGVyIiwiVXNlciIsImJjcnlwdCIsIlBvc3QiLCJDb21tZW50IiwidmVyaWZ5VG9rZW4iLCJwb3N0IiwicmVxIiwicmVzIiwiZiIsIm5ld1Bvc3QiLCJib2R5Iiwic2F2ZWRQb3N0Iiwic2F2ZSIsInN0YXR1cyIsImpzb24iLCJlcnIiLCJwdXQiLCJ1cGRhdGVkUG9zdCIsImZpbmRCeUlkQW5kVXBkYXRlIiwicGFyYW1zIiwiaWQiLCIkc2V0IiwibmV3IiwiZGVsZXRlIiwiZmluZEJ5SWRBbmREZWxldGUiLCJkZWxldGVNYW55IiwicG9zdElkIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VzIjpbInBvc3RzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGV4cHJlc3MgPSByZXF1aXJlKFwiZXhwcmVzc1wiKTtcclxuY29uc3Qgcm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTtcclxuY29uc3QgVXNlciA9IHJlcXVpcmUoXCIuLi9tb2RlbHMvVXNlclwiKTtcclxuY29uc3QgYmNyeXB0ID0gcmVxdWlyZShcImJjcnlwdGpzXCIpO1xyXG5jb25zdCBQb3N0ID0gcmVxdWlyZShcIi4uL21vZGVscy9Qb3N0XCIpO1xyXG5jb25zdCBDb21tZW50ID0gcmVxdWlyZShcIi4uL21vZGVscy9Db21tZW50XCIpO1xyXG5jb25zdCB2ZXJpZnlUb2tlbiA9IHJlcXVpcmUoXCIuLi92ZXJpZnlUb2tlblwiKTtcclxuXHJcbi8vQ1JFQVRFXHJcbnJvdXRlci5wb3N0KFwiL2NyZWF0ZVwiLCB2ZXJpZnlUb2tlbiwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IG5ld1Bvc3QgPSBuZXcgUG9zdChyZXEuYm9keSk7XHJcbiAgICAvLyBjb25zb2xlLmxvZyhyZXEuYm9keSlcclxuICAgIGNvbnN0IHNhdmVkUG9zdCA9IGF3YWl0IG5ld1Bvc3Quc2F2ZSgpO1xyXG5cclxuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHNhdmVkUG9zdCk7XHJcbiAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbihlcnIpO1xyXG4gIH1cclxufSk7XHJcblxyXG4vL1VQREFURVxyXG5yb3V0ZXIucHV0KFwiLzppZFwiLCB2ZXJpZnlUb2tlbiwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHVwZGF0ZWRQb3N0ID0gYXdhaXQgUG9zdC5maW5kQnlJZEFuZFVwZGF0ZShcclxuICAgICAgcmVxLnBhcmFtcy5pZCxcclxuICAgICAgeyAkc2V0OiByZXEuYm9keSB9LFxyXG4gICAgICB7IG5ldzogdHJ1ZSB9XHJcbiAgICApO1xyXG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24odXBkYXRlZFBvc3QpO1xyXG4gIH0gY2F0Y2ggKGVycikge1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oZXJyKTtcclxuICB9XHJcbn0pO1xyXG5cclxuLy9ERUxFVEVcclxucm91dGVyLmRlbGV0ZShcIi86aWRcIiwgdmVyaWZ5VG9rZW4sIGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBhd2FpdCBQb3N0LmZpbmRCeUlkQW5kRGVsZXRlKHJlcS5wYXJhbXMuaWQpO1xyXG4gICAgYXdhaXQgQ29tbWVudC5kZWxldGVNYW55KHsgcG9zdElkOiByZXEucGFyYW1zLmlkIH0pO1xyXG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24oXCJQb3N0IGhhcyBiZWVuIGRlbGV0ZWQhXCIpO1xyXG4gIH0gY2F0Y2ggKGVycikge1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oZXJyKTtcclxuICB9XHJcbn0pO1xyXG5cclxuLy8gLy9HRVQgUE9TVCBERVRBSUxTXHJcbi8vIHJvdXRlci5nZXQoXCIvOmlkXCIsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4vLyAgIHRyeSB7XHJcbi8vICAgICBjb25zdCBwb3N0ID0gYXdhaXQgUG9zdC5maW5kQnlJZChyZXEucGFyYW1zLmlkKTtcclxuLy8gICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHBvc3QpO1xyXG4vLyAgIH0gY2F0Y2ggKGVycikge1xyXG4vLyAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oZXJyKTtcclxuLy8gICB9XHJcbi8vIH0pO1xyXG5cclxuLy8gLy9HRVQgUE9TVFNcclxuLy8gcm91dGVyLmdldChcIi9cIiwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbi8vICAgY29uc3QgcXVlcnkgPSByZXEucXVlcnk7XHJcblxyXG4vLyAgIHRyeSB7XHJcbi8vICAgICBjb25zdCBzZWFyY2hGaWx0ZXIgPSB7XHJcbi8vICAgICAgIHRpdGxlOiB7ICRyZWdleDogcXVlcnkuc2VhcmNoLCAkb3B0aW9uczogXCJpXCIgfSxcclxuLy8gICAgIH07XHJcbi8vICAgICBjb25zdCBwb3N0cyA9IGF3YWl0IFBvc3QuZmluZChxdWVyeS5zZWFyY2ggPyBzZWFyY2hGaWx0ZXIgOiBudWxsKTtcclxuLy8gICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHBvc3RzKTtcclxuLy8gICB9IGNhdGNoIChlcnIpIHtcclxuLy8gICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKGVycik7XHJcbi8vICAgfVxyXG4vLyB9KTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gcm91dGVyO1xyXG4iXSwibWFwcGluZ3MiOiJxckZBZVk7QUFBQUEsY0FBQSxTQUFBQSxDQUFBLFNBQUFDLGNBQUEsV0FBQUEsY0FBQSxFQUFBRCxjQUFBLEdBZlosS0FBTSxDQUFBRSxPQUFPLEVBQUFGLGNBQUEsR0FBQUcsQ0FBQSxNQUFHQyxPQUFPLENBQUMsU0FBUyxDQUFDLEVBQ2xDLEtBQU0sQ0FBQUMsTUFBTSxFQUFBTCxjQUFBLEdBQUFHLENBQUEsTUFBR0QsT0FBTyxDQUFDSSxNQUFNLENBQUMsQ0FBQyxFQUMvQixLQUFNLENBQUFDLElBQUksRUFBQVAsY0FBQSxHQUFBRyxDQUFB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